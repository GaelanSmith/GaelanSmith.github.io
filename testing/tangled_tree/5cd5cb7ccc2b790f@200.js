// https://observablehq.com/@jashkenas/markdown-style-footnotes@200
function _1(md){return(
md`# Markdown-Style Footnotes Refined

*Using a bit of the Iliad, in the [Buckley translation](http://www.gutenberg.org/files/22382/22382-h/22382-h.htm), for the demonstration.*`
)}

function _paragraph1(md){return(
md`But to them arose the hero, the son of Atreus, wide-ruling Agamemnon,<sup>[[19](#footnote19)]</sup> agitated; and his all-gloomy heart was greatly filled with wrath, and his eyes were like unto gleaming fire. Sternly regarding Calchas most of all, he addressed [him]:

“Prophet of ills, not at any time hast thou spoken anything good for me; but evils are always gratifying to thy soul to prophesy,<sup>[[20](#footnote20)]</sup> and never yet hast thou offered one good word, nor accomplished [one]. And now, prophesying amongst the Greeks, thou haranguest that forsooth the Far-darter works griefs to them upon this account, because I was unwilling to accept the splendid ransom of the virgin daughter of Chryses, since I much prefer to have her at home; and my reason is, I prefer her even to Clytemnestra, my lawful wife; for she is not inferior to her, either in person, or in figure, or in mind, or by any means in accomplishments. But even thus I am willing to restore her, if it be better; for I wish the people to be safe rather than to perish. But do thou immediately prepare a prize for me, that I may not alone, of the Argives, be without a prize; since it is not fitting. For ye all see this, that my prize is going elsewhere.”`
)}

function _paragraph2(md){return(
md`But him swift-footed godlike Achilles then answered: “Most noble son of Atreus, most avaricious of all! for how shall the magnanimous Greeks assign thee a prize? Nor do we know of many common stores laid up anywhere. But what we plundered<sup>[[21](#footnote21)]</sup> from the cities, these have been divided, and it is not fitting that the troops should collect these brought together again. But do thou now let her go to the God, and we Greeks will compensate thee thrice, or four-fold, if haply Jove grant to us to sack the well-fortified city of Troy.”`
)}

function _paragraph3(md){return(
md`But him answering, king Agamemnon addressed: “Do not thus, excellent though thou be, godlike Achilles, practise deceit in thy mind; since thou shalt not overreach, nor yet persuade me. Dost thou wish that thou thyself mayest have a prize, whilst I sit down idly,<sup>[[22](#footnote22)]</sup> wanting one? And dost thou bid me to restore her? If, however, the magnanimous Greeks will give me a prize, having suited it to my mind, so that it shall be an equivalent, [it is well]. But if they will not give it, then I myself coming, will seize your prize, or that of Ajax,<sup>[[23](#footnote23)]</sup> or Ulysses,<sup>[[24](#footnote24)]</sup> and will bear it away; and he to whom I may come shall have cause for anger. On these things, however, we will consult afterwards. But now come, let us launch a sable ship into the boundless sea, and let us collect into it rowers in sufficient number, and place on board a hecatomb; and let us make the fair-cheeked daughter of Chryses to embark, and let some one noble man be commander, Ajax or Idomeneus, or divine Ulysses; or thyself, son of Peleus, most terrible of all men, that thou mayest appease for us the Far-darter, having offered sacrifices.”`
)}

function _paragraph4(md){return(
md`But him swift-footed Achilles sternly regarding, addressed: “Ha!<sup>[[25](#footnote25)]</sup> thou clad in impudence, thou bent on gain, how can any of the Greeks willingly obey thy orders, either to undertake a mission, or to fight bravely with men? For I did not come hither to fight on account of the warlike Trojans, seeing that they are blameless as respects me. Since they have never driven away my oxen, nor my horses either nor ever injured my crops in fertile and populous Phthia: for very many shadowy mountains, and the resounding sea, are between us. But thee, O most shameless man, we follow, that thou mayest rejoice; seeking satisfaction from the Trojans for Menelaus, and for thy pleasure, shameless one! for which things thou hast neither respect nor care. And now thou hast threatened that thou wilt in person wrest from me my prize, for which I have toiled much, and which the sons of the Greeks have given me. Whenever the Greeks sacked a well-inhabited city of the Trojans, I never have had a prize equal to thine; although my hands perform the greater portion of the tumultuous conflict, yet when the division [of spoil] may come, a much greater prize is given to thee, while I come to my ships, when I am fatigued with fighting, having one small and agreeable. But now I will go to Phthia, for it is much better to return home with our curved ships; for I do not think that thou shalt amass wealth and treasures while I am dishonoured here.”`
)}

function _paragraph5(md){return(
md`But him, the king of men, Agamemnon, then answered: “Fly, by all means, if thy mind urges thee; nor will I entreat thee to remain on my account: there are others with me who will honour me, but chiefly the all-wise Jove. For to me thou art the most odious of the Jove-nourished princes, for ever is contention agreeable to thee, and wars and battles. If thou be very bold, why doubtless a deity has given this to thee. Going home with thy ships and thy companions, rule over the Myrmidons; for I do not regard thee, nor care for thee in thy wrath; but thus will I threaten thee: Since Phoebus Apollo is depriving me of the daughter of Chryses,<sup>[[26](#footnote26)]</sup> her indeed I will send, with my own ship, and with my own friends; but I myself, going to thy tent, will lead away the fair-cheeked daughter of Brises,<sup>[[27](#footnote27)]</sup> thy prize; that thou mayest well know how much more powerful I am than thou, and that another may dread to pronounce himself equal to me, and to liken himself openly [to me].”`
)}

function _paragraph6(md){return(
md`Thus he spoke, and grief arose to the son of Peleus, and the heart within, in his hairy breast, was pondering upon two courses; whether, drawing his sharp sword from his thigh, he should dismiss them,<sup>[[28](#footnote28)]</sup> and should kill the son of Atreus, or should put a stop to his wrath, and restrain his passion. While he was thus pondering in his heart and soul, and was drawing his mighty sword from the scabbard, came Minerva from heaven; for her the white-armed goddess Juno had sent forward, equally loving and regarding both from her soul. And she stood behind, and caught the son of Peleus by his yellow hair, appearing to him alone; but none of the others beheld her. But Achilles was amazed, and turned himself round, and immediately recognized Pallas Minerva; and awe-inspiring her eyes appeared to him. And addressing her, he spoke winged words:

“Why, O offspring of ægis-bearing Jove, hast thou come hither? Is it that thou mayest witness the insolence of Agamemnon, the son of Atreus? But I tell thee, what I think will be accomplished, that he will probably soon lose his life by his haughtiness.”`
)}

function _paragraph7(md){return(
md`But him in turn the azure-eyed goddess Minerva addressed: “I came from heaven to assuage thy wrath, if thou wilt obey me; for the white-armed goddess Juno sent me forward, equally loving and regarding both from her soul. But come, cease from strife, nor draw the sword with thine hand. But reproach by words, as the occasion may suggest; for thus I declare, and it shall be accomplished, that thrice as many splendid gifts shall be presented to thee, because of this insolent act; only restrain thyself, and obey us.”

But her answering,<sup>[[29](#footnote29)]</sup> swift-footed Achilles addressed: “It behoves me to observe the command of you both, O goddess, although much enraged in my soul; for so it is better. Whosoever obeys the gods, to him they hearken propitiously.”`
)}

function _paragraph8(md){return(
md`He spoke, and held still his heavy hand upon the silvery hilt, and thrust back the great sword into the scabbard, nor did he disobey the mandate of Minerva; but she had gone to Olympus, to the mansions of ægis-bearing Jove, amongst the other deities. But the son of Peleus again addressed Atrides with injurious [[30](#footnote30)] words, nor as yet ceased from anger:

“Wine-bibber, having the countenance of a dog, but the heart of a stag, never hast thou at any time dared in soul to arm thyself with the people for war, nor to go to ambuscade with the chiefs of the Greeks; for this always appears to thee to be death. Certainly it is much better through the wide army of the Achæans, to take away the rewards of whoever may speak against thee. A people-devouring king [art thou], since thou rulest over fellows of no account; for assuredly, son of Atreus, thou [otherwise] wouldst have insulted now for the last time. But I will tell thee, and I will further swear a great oath: yea, by this sceptre, which will never bear leaves and branches, nor will bud again, after it has once left its trunk on the mountains; for the axe has lopped it all around of its leaves and bark; but now the sons of the Greeks, the judges, they who protect the laws [received] from Jove, bear it in their hands; and this will be a great oath to thee; surely will a longing desire for Achilles come upon all the sons of the Achæans at some future day, and thou, although much grieved, wilt be unable to assist them, when many dying shall fall by the hand of man-slaying Hector. Then enraged, wilt thou inwardly fret thy soul, that thou didst in no way honour the bravest of the Greeks.”`
)}

function _footnotes(md){return(
md`---

## Footnotes`
)}

function _footnote19(md){return(
md`19. [^](#paragraph1) “In the assembly of the people, as in the courts of justice, the nobles alone speak, advise, and decide, whilst the people merely listen to their ordinances and decisions, in order to regulate their own conduct accordingly; being suffered, indeed, to follow the natural impulse of evincing, to a certain extent, their approbation or disapprobation of their superiors, but without any legal means of giving validity to their opinion.” Müller, Gk. Lit. p. 30.`
)}

function _footnote20(html){return(
html`<ol start="20">
  <li><a href="#paragraph1">^</a> But we must not join μαντεύεσθαι with κικά.—Nägelsbach.</li>
</ol>`
)}

function _footnote21(footnote){return(
footnote("paragraph2", 21, "More closely: “took from the cities, when we destroyed them.”")
)}

function _footnote22(footnote){return(
footnote("paragraph3", 22, "Buttmann would take αὔτως as = frustra.")
)}

function _footnote23(footnote){return(
footnote("paragraph3", 23, "Tecmessa.")
)}

function _footnote24(footnote){return(
footnote("paragraph3", 24, "Laodice, daughter of Cyenus.")
)}

function _footnote25(footnote){return(
footnote("paragraph4", 25, "See my note on Od. i. p. 2, n. 11, ed. Bohn.")
)}

function _footnote26(footnote){return(
footnote("paragraph5", 26, "Astynome. Cf. Eustath. fol. 58.")
)}

function _footnote27(footnote){return(
footnote("paragraph5", 27, "Hippodameia.")
)}

function _footnote28(footnote){return(
footnote("paragraph6", 28, "The princes assembled.")
)}

function _footnote29(footnote){return(
footnote("paragraph7", 29, "Columna on Ennius, p. 17, ed. Hessel., compares “Ollei respondet Rex Albaï longaï,” and “Ollei respondet suavis sonus Egeriäi,” observing that this formula was probably as common in the heroic annals of Ennius as τὸν δ' ὰπαμειξόμενος is in Homer.")
)}

function _footnote30(footnote){return(
footnote("paragraph8", 30, "Epimerism. Hom. in Cramer’s Anecdott. vol. i. p. 24. άταρτηρός, η παρά την άτην, ο σημαίνει την βλάξην, άτηρός.—Hesych. βλαξρός, άτηρός.")
)}

function _23(md){return(
md`## Appendix`
)}

function _24(html){return(
html`<style>
  sup {
    line-height: 0;
  }
</style>`
)}

function _footnote(html){return(
(referencingCellName, number, text) => {
  return html`<ol start=\"${number}"><li><a href="#${referencingCellName}">^</a> ${text}</li></ol>`;
}
)}

export default function define(runtime, observer) {
  const main = runtime.module();
  main.variable(observer()).define(["md"], _1);
  main.variable(observer("paragraph1")).define("paragraph1", ["md"], _paragraph1);
  main.variable(observer("paragraph2")).define("paragraph2", ["md"], _paragraph2);
  main.variable(observer("paragraph3")).define("paragraph3", ["md"], _paragraph3);
  main.variable(observer("paragraph4")).define("paragraph4", ["md"], _paragraph4);
  main.variable(observer("paragraph5")).define("paragraph5", ["md"], _paragraph5);
  main.variable(observer("paragraph6")).define("paragraph6", ["md"], _paragraph6);
  main.variable(observer("paragraph7")).define("paragraph7", ["md"], _paragraph7);
  main.variable(observer("paragraph8")).define("paragraph8", ["md"], _paragraph8);
  main.variable(observer("footnotes")).define("footnotes", ["md"], _footnotes);
  main.variable(observer("footnote19")).define("footnote19", ["md"], _footnote19);
  main.variable(observer("footnote20")).define("footnote20", ["html"], _footnote20);
  main.variable(observer("footnote21")).define("footnote21", ["footnote"], _footnote21);
  main.variable(observer("footnote22")).define("footnote22", ["footnote"], _footnote22);
  main.variable(observer("footnote23")).define("footnote23", ["footnote"], _footnote23);
  main.variable(observer("footnote24")).define("footnote24", ["footnote"], _footnote24);
  main.variable(observer("footnote25")).define("footnote25", ["footnote"], _footnote25);
  main.variable(observer("footnote26")).define("footnote26", ["footnote"], _footnote26);
  main.variable(observer("footnote27")).define("footnote27", ["footnote"], _footnote27);
  main.variable(observer("footnote28")).define("footnote28", ["footnote"], _footnote28);
  main.variable(observer("footnote29")).define("footnote29", ["footnote"], _footnote29);
  main.variable(observer("footnote30")).define("footnote30", ["footnote"], _footnote30);
  main.variable(observer()).define(["md"], _23);
  main.variable(observer()).define(["html"], _24);
  main.variable(observer("footnote")).define("footnote", ["html"], _footnote);
  return main;
}
